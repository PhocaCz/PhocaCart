String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),geoXML3=window.geoXML3||{},geoXML3.parser=function(e){var s,y=geoXML3.combineOptions(e,{singleInfoWindow:!1,processStyles:!0,zoom:!0}),w=[],a=function(e,o){if(e){if(!o)throw"geoXML3 internal error: render called with null document";var n,t,a;o.styles={},o.placemarks=[],o.groundOverlays=[],y.zoom&&y.map&&(o.bounds=new google.maps.LatLngBounds);var s,r,l,i,g=e.getElementsByTagName("Style");for(a=0;a<g.length;a++)n=g[a].getAttribute("id"),(t=g[a].getElementsByTagName("Icon")).length&&(o.styles["#"+n]={href:geoXML3.nodeValue(t[0].getElementsByTagName("href")[0])});!y.processStyles&&y.createMarker||h(o);var p,m,c,d=e.getElementsByTagName("Placemark");for(a=0;a<d.length;a++)r=d[a],(s={name:geoXML3.nodeValue(r.getElementsByTagName("name")[0]),description:geoXML3.nodeValue(r.getElementsByTagName("description")[0]),styleUrl:geoXML3.nodeValue(r.getElementsByTagName("styleUrl")[0])}).style=o.styles[s.styleUrl]||{},/^https?:\/\//.test(s.description)&&(s.description='<a href="'+s.description+'">'+s.description+"</a>"),1===(i=(l=(l=geoXML3.nodeValue(r.getElementsByTagName("coordinates")[0]).trim()).replace(/\s+/g," ").replace(/, /g,",")).split(" ")).length&&(l=i[0].split(","),s.point={lat:parseFloat(l[1]),lng:parseFloat(l[0]),alt:parseFloat(l[2])},o.bounds&&o.bounds.extend(new google.maps.LatLng(s.point.lat,s.point.lng)),y.createMarker?y.createMarker(s,o):f(s,o));var u=e.getElementsByTagName("GroundOverlay");for(a=0;a<u.length;a++)r=u[a],p={name:geoXML3.nodeValue(r.getElementsByTagName("name")[0]),description:geoXML3.nodeValue(r.getElementsByTagName("description")[0]),icon:{href:geoXML3.nodeValue(r.getElementsByTagName("href")[0])},latLonBox:{north:parseFloat(geoXML3.nodeValue(r.getElementsByTagName("north")[0])),east:parseFloat(geoXML3.nodeValue(r.getElementsByTagName("east")[0])),south:parseFloat(geoXML3.nodeValue(r.getElementsByTagName("south")[0])),west:parseFloat(geoXML3.nodeValue(r.getElementsByTagName("west")[0]))}},o.bounds&&o.bounds.union(new google.maps.LatLngBounds(new google.maps.LatLng(p.latLonBox.south,p.latLonBox.west),new google.maps.LatLng(p.latLonBox.north,p.latLonBox.east))),""!==(m=geoXML3.nodeValue(r.getElementsByTagName("color")[0]))&&8==m.length?(c=parseInt(m.substring(0,2),16),p.opacity=Math.round((255-c)/2.55)):p.opacity=100,y.createOverlay?y.createOverlay(p,o):L(p,o);o.bounds&&(o.internals.bounds=o.internals.bounds||new google.maps.LatLngBounds,o.internals.bounds.union(o.bounds)),(o.styles||o.markers||o.overlays)&&(o.internals.parserOnly=!1),--o.internals.remaining,0===o.internals.remaining&&(o.internals.bounds&&y.map.fitBounds(o.internals.bounds),y.afterParse&&y.afterParse(o.internals.docSet),o.internals.parserOnly||w.concat(o.internals.docSet))}else geoXML3.log("Unable to retrieve "+o.url),y.failedParse&&y.failedParse(o)},h=function(e){var o=/\/(red|blue|green|yellow|lightblue|purple|pink|orange)(-dot)?\.png/;for(var n in e.styles)e.styles[n].href&&(e.styles[n].icon=new google.maps.MarkerImage(e.styles[n].href,new google.maps.Size(32,32),new google.maps.Point(0,0),new google.maps.Point(16,12)),o.test(e.styles[n].href)?e.styles[n].shadow=new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/msmarker.shadow.png",new google.maps.Size(59,32),new google.maps.Point(0,0),new google.maps.Point(16,12)):-1<e.styles[n].href.indexOf("-pushpin.png")?e.styles[n].shadow=new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/pushpin_shadow.png",new google.maps.Size(59,32),new google.maps.Point(0,0),new google.maps.Point(16,12)):e.styles[n].shadow=new google.maps.MarkerImage(e.styles[n].href.replace(".png",".shadow.png"),new google.maps.Size(59,32),new google.maps.Point(0,0),new google.maps.Point(16,12)))},f=function(e,o){var n=geoXML3.combineOptions(y.markerOptions,{map:y.map,position:new google.maps.LatLng(e.point.lat,e.point.lng),title:e.name,zIndex:Math.round(1e5*-e.point.lat),icon:e.style.icon,shadow:e.style.shadow}),t=new google.maps.Marker(n),a=geoXML3.combineOptions(y.infoWindowOptions,{content:'<div class="infowindow"><h3>'+e.name+"</h3><div>"+e.description+"</div></div>",pixelOffset:new google.maps.Size(0,2)});return t.infoWindow=new google.maps.InfoWindow(a),google.maps.event.addListener(t,"click",function(){y.singleInfoWindow&&(s&&s.infoWindow&&s.infoWindow.close(),s=this),this.infoWindow.open(this.map,this)}),o&&(o.markers=o.markers||[],o.markers.push(t)),t},L=function(e,o){if(!window.ProjectedOverlay)throw"geoXML3 error: ProjectedOverlay not found while rendering GroundOverlay from KML";var n=new google.maps.LatLngBounds(new google.maps.LatLng(e.latLonBox.south,e.latLonBox.west),new google.maps.LatLng(e.latLonBox.north,e.latLonBox.east)),t=geoXML3.combineOptions(y.overlayOptions,{percentOpacity:e.opacity}),a=new ProjectedOverlay(y.map,e.icon.href,n,t);o&&(o.overlays=o.overlays||[],o.overlays.push(a))};return{options:y,docs:w,parse:function(e){"string"==typeof e&&(e=[e]);for(var o,n={docSet:[],remaining:e.length,parserOnly:!y.afterParse},t=0;t<e.length;t++)o={url:e[t],internals:n},n.docSet.push(o),geoXML3.fetchXML(o.url,function(e){a(e,o)})},hideDocument:function(e){var o;for(o=0;o<e.markers.length;o++)this.markers[o].set_visible(!1);for(o=0;o<e.overlays.length;o++)e.overlays[o].setOpacity(0)},showDocument:function(e){var o;for(o=0;o<e.markers.length;o++)e.markers[o].set_visible(!0);for(o=0;o<e.overlays.length;o++)e.overlays[o].setOpacity(e.overlays[o].percentOpacity_)},processStyles:h,createMarker:f,createOverlay:L}},geoXML3.log=function(e){window.console&&console.log(e)},geoXML3.combineOptions=function(e,o){var n={};if(e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(o)for(t in o)o.hasOwnProperty(t)&&void 0===n[t]&&(n[t]=o[t]);return n},geoXML3.fetchers=[],geoXML3.fetchXML=function(e,o){var n;geoXML3.fetchers.length?n=geoXML3.fetchers.pop():window.XMLHttpRequest?n=new window.XMLHttpRequest:window.ActiveXObject&&(n=new window.ActiveXObject("Microsoft.XMLHTTP")),n?(n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&(n.timeout&&clearTimeout(n.timeout),400<=n.status?(geoXML3.log("HTTP error "+n.status+" retrieving "+e),o()):o(n.responseXML),geoXML3.fetchers.push(n))},n.timeout=setTimeout(function(){o()},6e4),n.send(null)):(geoXML3.log("Unable to create XHR object"),o(null))},geoXML3.nodeValue=function(e){return e?(e.innerText||e.text||e.textContent).trim():""};