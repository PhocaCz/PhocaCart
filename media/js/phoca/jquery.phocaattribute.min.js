function phChangeAttributeType(e){var t=(e=void 0!==e?".phj"+e:"")+".phjProductAttribute";jQuery(e+".phjCleanAttribute").remove(),jQuery(t).each(function(){let a="",i,r="#phItemAttribute"+jQuery(this).data("attribute-id-name"),u="#phItemHiddenAttribute"+jQuery(this).data("attribute-id-name");var e="#phItemBoxAttribute"+jQuery(this).data("attribute-id-name");let d=jQuery(this).data("attribute-type");var s=jQuery(this).data("type-view");let h=jQuery(this).data("type-icon"),n=jQuery(this).data("required");if(3==d?a="phSelectBoxImage":2==d&&(a="phSelectBoxButton"),""!=a){i=u+" ."+a;let t=jQuery(r).attr("name");var c=jQuery('<input type="hidden" name="'+t+'">');c.val(jQuery(r).val()),c.insertAfter(jQuery(r)),jQuery(u).css("display","block"),jQuery(e).css({display:"visible",position:"absolute",clip:"rect(0,0,0,0)"}),jQuery(e).addClass("phj"+s+" phjCleanAttribute"),jQuery(r+" option").each(function(){if(""!=jQuery(this).val()){let e="";3==d?e=jQuery('<div class="'+a+" "+h+'" data-value="'+jQuery(this).val()+'" data-value-alias="'+jQuery(this).data("value-alias")+'" title="'+jQuery(this).text()+'"><img src="'+jQuery(this).data("image")+'" alt="'+jQuery(this).text()+'" /></div>'):2==d&&(e=jQuery('<div class="'+a+" "+h+" color-"+jQuery(this).data("color").replace("#","")+'" style="background-color:'+jQuery(this).data("color")+'" data-value="'+jQuery(this).val()+'" data-value-alias="'+jQuery(this).data("value-alias")+'" title="'+jQuery(this).text()+'">&nbsp;</div>')),jQuery(this).is(":selected")&&e.addClass("on"),jQuery(u).append(e)}}),jQuery(i).on("click",function(e){if(e.preventDefault(),jQuery(this).hasClass("on")){if(1==n)return e.preventDefault(),!1;jQuery(this).removeClass("on"),jQuery('input[name="'+t+'"]').val(""),jQuery(r).val("").change()}else jQuery(i).removeClass("on"),jQuery(this).addClass("on"),jQuery('input[name="'+t+'"]').val(jQuery(this).data("value")),jQuery(r).val(jQuery(this).data("value")).change()})}})}function phAjaxChangeAttributeData(e,t,a,i){var r=Joomla.getOptions("phParamsPC"),u=Joomla.getOptions("phVarsPC").urlCheckoutChangeData,d=[],e=(d.id=e,d.id_item_price="#phItemPriceBox"+t+e,d.id_item_price_gift="#phItemPriceGiftBox"+t+e,d.id_item_stock="#phItemStockBox"+t+e,d.id_item_id="#phItemIdBox"+t+e,d.id_item_name="V"+t+"P"+e,d.product_add_to_cart_item=".phProductAddToCart"+t+e,d.product_add_to_cart_item_icon=".phProductAddToCartIcon"+t+e,d.view=t,d.method_price=r.dynamicChangePrice,d.method_stock=r.dynamicChangeStock,d.method_id=r.dynamicChangeId,d.method_image=r.dynamicChangeImage,d.task="change",d.type="changedata",d.class="ItemQuick"==t||"Pos"==t||"Item"==t?"ph-item-data-box":"ph-category-data-box","id="+d.id+"&"+a+"&"+i+"&class="+d.class+"&typeview="+d.view);phDoRequestMethods(u,e,d)}function phSetAttributeUrl(u){var e=Joomla.getOptions("phParamsPC"),t=Joomla.getOptions("phVarsPC");if(1!=e.dynamicChangeUrlAttributes)return!1;if("item"!=t.view)return!1;t=jQuery(location).attr("hash"),t=phReplaceAll("#","",t);let d=phUrlDeParam(t);t=".phjProductAttribute";let s="",h="",n="";var a=jQuery(t).closest("form").find("input[name=return]");let i="";void 0!==a.val()&&""!=a.val()&&(i=Base64.decode(a.val())),jQuery(t).each(function(){""!=s&&(s+="&");let e=this.id;var t=jQuery(this).data("alias");let a="",i="",r="#phItemHiddenAttribute"+jQuery(this).data("attribute-id-name");1==u?(void 0!==jQuery(this).find(":selected").data("value-alias")&&(a=jQuery(this).find(":selected").data("value-alias"),s=s+"a["+jQuery(this).data("alias")+"]="+a),void 0!==jQuery(this).find(":input:checked").data("value-alias")&&(jQuery.each(jQuery(this).find(":input:checked"),function(){""!=i&&(i+=","),i+=jQuery(this).data("value-alias")}),""!=i)&&(s=s+"a["+jQuery(this).data("alias")+"]="+i)):(void 0!==d.a&&void 0!==t&&void 0!==d.a[t]?(s=s+"a["+jQuery(this).data("alias")+"]="+d.a[t],void 0===(t=d.a[t].split(","))&&0==t.length||(jQuery("#"+e+" option").removeAttr("selected"),jQuery(r+" div").removeClass("on"),jQuery("#"+e+" input").removeAttr("checked"),jQuery(t).each(function(){jQuery("#"+e+" option[data-value-alias='"+this+"']").attr("selected","selected"),jQuery(r+" div[data-value-alias='"+this+"']").addClass("on"),jQuery("#"+e+" input[data-value-alias='"+this+"']").attr("checked","checked"),jQuery("#"+e+" input[data-value-alias='"+this+"']").parent().addClass("active")}))):(void 0!==jQuery(this).find(":selected").data("value-alias")&&(a=jQuery(this).find(":selected").data("value-alias"),s=s+"a["+jQuery(this).data("alias")+"]="+a),void 0!==jQuery(this).find(":input:checked").data("value-alias")&&(jQuery.each(jQuery(this).find(":input:checked"),function(){""!=i&&(i+=","),i+=jQuery(this).data("value-alias")}),""!=i)&&(s=s+"a["+jQuery(this).data("alias")+"]="+i)),h=jQuery(this).data("type-view"),n=jQuery(this).data("product-id"))}),(0!=e.dynamicChangePrice||0!=e.dynamicChangeStock||0!=e.dynamicChangeId||0!=e.dynamicChangeImage&&1!=e.dynamicChangeImage)&&(t=".phjAddToCartV"+h+"P"+n,e=jQuery(t).find("select").serialize(),t=jQuery(t).find(":checkbox").serialize(),phAjaxChangeAttributeData(n,h,e,t)),s.lastIndexOf("&")==s.length-1&&(s=s.slice(0,-1)),(0==u&&""!=s||1==u)&&(s="#"+s,""!=i&&a.val(Base64.encode(i+s)),window.history.pushState({},"",s))}jQuery(document).ready(function(){phChangeAttributeType(),phSetAttributeUrl(0);jQuery(document).on("change","select.phjProductAttribute",function(e){var t=Joomla.getOptions("phParamsPC");if(0==t.dynamicChangePrice&&0==t.dynamicChangeStock&&0==t.dynamicChangeId&&(0==t.dynamicChangeImage||1==t.dynamicChangeImage))return 1==t.dynamicChangeUrlAttributes&&phSetAttributeUrl(1),!1;var t=jQuery(this).data("type-view"),a=jQuery(this).data("product-id"),i=".phjAddToCartV"+t+"P"+a;phAjaxChangeAttributeData(a,t,jQuery(i).find("select").serialize(),jQuery(i).find(":checkbox").serialize()),phSetAttributeUrl(1)});var e=".ph-checkbox-attribute.phjProductAttribute";jQuery(document).on("click",e,function(e){var t=Joomla.getOptions("phParamsPC");if("LABEL"!==e.target.tagName.toUpperCase()){if("svg"==t.theme||"svg"==t.iconType){if("SVG"===e.target.tagName.toUpperCase()||"IMG"===e.target.tagName.toUpperCase())return}else if(!("bs4"!=t.theme&&"bs5"!=t.theme||"SPAN"!==e.target.tagName.toUpperCase()&&"IMG"!==e.target.tagName.toUpperCase()))return;var t=jQuery(this).data("required"),a="#"+jQuery(this).attr("id")+" input:checked",a=jQuery(a).length;if(t&&0==a)return jQuery(e.target).parent().addClass("active"),e.preventDefault(),!1;t="#"+jQuery(this).attr("id")+" input[type='checkbox']",a=jQuery(t);0<a.length&&a.each(function(e){var t=jQuery(this).parent();jQuery(this).is(":checked")?t.addClass("active"):t.removeClass("active")})}}),jQuery(document).on("click",e,function(e){var t=Joomla.getOptions("phParamsPC");if(0!=t.dynamicChangePrice||0!=t.dynamicChangeStock||0!=t.dynamicChangeId||0!=t.dynamicChangeImage&&1!=t.dynamicChangeImage){if("LABEL"!==e.target.tagName.toUpperCase()){if("svg"==t.theme||"svg"==t.iconType){if("SVG"===e.target.tagName.toUpperCase()||"IMG"===e.target.tagName.toUpperCase())return}else if(!("bs4"!=t.theme&&"bs5"!=t.theme||"SPAN"!==e.target.tagName.toUpperCase()&&"IMG"!==e.target.tagName.toUpperCase()))return;var e=jQuery(this).data("product-id"),a=jQuery(this).data("type-view"),i=".phjAddToCartV"+a+"P"+e;phAjaxChangeAttributeData(e,a,jQuery(i).find("select").serialize(),jQuery(i).find(":checkbox").serialize()),phSetAttributeUrl(1)}}else 1==t.dynamicChangeUrlAttributes&&phSetAttributeUrl(1)}),jQuery(".phAOGift").on("input",function(){var t="."+jQuery(this).data("type");if(".phAOGiftType"==t){var a=jQuery(this).data("title"),a=(jQuery(".phAOGiftTitle").text(a),jQuery(this).data("image")),a=(jQuery(".phAOGiftImage").attr("src",a),jQuery(this).data("date"));jQuery(".phAOGiftDate").text(a);let e=jQuery(this).data("description");""!=e&&(e=Base64.decode(e)),jQuery(".phAOGiftDescription").html(e);a=jQuery(this).data("class-name");jQuery(t).attr("class","phAOGiftType ph-gift-voucher-box "+a)}else jQuery(t).text(jQuery(this).val())})});