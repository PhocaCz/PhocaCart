"use strict";function phChangeAttributeType(e){var t=(e=void 0!==e?".phj"+e:"")+".phjProductAttribute";jQuery(e+".phjCleanAttribute").remove(),jQuery(t).each(function(){var t,e,a="",i="",r="#phItemAttribute"+jQuery(this).data("attribute-id-name"),u="#phItemHiddenAttribute"+jQuery(this).data("attribute-id-name"),d="#phItemBoxAttribute"+jQuery(this).data("attribute-id-name"),s=jQuery(this).data("attribute-type"),h=jQuery(this).data("type-view"),n=jQuery(this).data("type-icon"),c=jQuery(this).data("required");3==s?a="phSelectBoxImage":2==s&&(a="phSelectBoxButton"),""!=a&&(i=u+" ."+a,t=jQuery(r).attr("name"),(e=jQuery('<input type="hidden" name="'+t+'">')).val(jQuery(r).val()),e.insertAfter(jQuery(r)),jQuery(u).css("display","block"),jQuery(d).css({display:"visible",position:"absolute",clip:"rect(0,0,0,0)"}),jQuery(d).addClass("phj"+h+" phjCleanAttribute"),jQuery(r+" option").each(function(){var e;""!=jQuery(this).val()&&(e="",3==s?e=jQuery('<div class="'+a+" "+n+'" data-value="'+jQuery(this).val()+'" data-value-alias="'+jQuery(this).data("value-alias")+'" title="'+jQuery(this).text()+'"><img src="'+jQuery(this).data("image")+'" alt="'+jQuery(this).text()+'" /></div>'):2==s&&(e=jQuery('<div class="'+a+" "+n+'" style="background-color:'+jQuery(this).data("color")+'" data-value="'+jQuery(this).val()+'" data-value-alias="'+jQuery(this).data("value-alias")+'" title="'+jQuery(this).text()+'">&nbsp;</div>')),jQuery(this).is(":selected")&&e.addClass("on"),jQuery(u).append(e))}),jQuery(i).on("click",function(e){if(e.preventDefault(),jQuery(this).hasClass("on")){if(1==c)return e.preventDefault(),!1;jQuery(this).removeClass("on"),jQuery('input[name="'+t+'"]').val(""),jQuery(r).val("").change()}else jQuery(i).removeClass("on"),jQuery(this).addClass("on"),jQuery('input[name="'+t+'"]').val(jQuery(this).data("value")),jQuery(r).val(jQuery(this).data("value")).change()}))})}function phAjaxChangeAttributeData(e,t,a,i){var r=Joomla.getOptions("phParamsPC"),u=Joomla.getOptions("phVarsPC").urlCheckoutChangeData,d=[];d.id=e,d.id_item_price="#phItemPriceBox"+t+e,d.id_item_price_gift="#phItemPriceGiftBox"+t+e,d.id_item_stock="#phItemStockBox"+t+e,d.id_item_id="#phItemIdBox"+t+e,d.id_item_name="V"+t+"P"+e,d.product_add_to_cart_item=".phProductAddToCart"+t+e,d.product_add_to_cart_item_icon=".phProductAddToCartIcon"+t+e,d.view=t,d.method_price=r.dynamicChangePrice,d.method_stock=r.dynamicChangeStock,d.method_id=r.dynamicChangeId,d.method_image=r.dynamicChangeImage,d.task="change",d.type="changedata",d.class="ItemQuick"==t||"Pos"==t||"Item"==t?"ph-item-data-box":"ph-category-data-box";i="id="+d.id+"&"+a+"&"+i+"&class="+d.class+"&typeview="+d.view;phDoRequestMethods(u,i,d)}function phSetAttributeUrl(u){var e=Joomla.getOptions("phParamsPC"),t=Joomla.getOptions("phVarsPC");if(1!=e.dynamicChangeUrlAttributes)return!1;if("item"!=t.view)return!1;var a=jQuery(location).attr("hash"),a=phReplaceAll("#","",a),d=phUrlDeParam(a),i=".phjProductAttribute",s="",h="",n="",t=jQuery(i).closest("form").find("input[name=return]"),a="";void 0!==t.val()&&""!=t.val()&&(console.log(t.val()),a=Base64.decode(t.val())),jQuery(i).each(function(){""!=s&&(s+="&");var e=this.id,t=jQuery(this).data("alias"),a="",i="",r="#phItemHiddenAttribute"+jQuery(this).data("attribute-id-name");1==u?(void 0!==jQuery(this).find(":selected").data("value-alias")&&(a=jQuery(this).find(":selected").data("value-alias"),s=s+"a["+jQuery(this).data("alias")+"]="+a),void 0!==jQuery(this).find(":input:checked").data("value-alias")&&(jQuery.each(jQuery(this).find(":input:checked"),function(){""!=i&&(i+=","),i+=jQuery(this).data("value-alias")}),""!=i&&(s=s+"a["+jQuery(this).data("alias")+"]="+i))):(void 0!==d.a&&void 0!==t&&void 0!==d.a[t]?(s=s+"a["+jQuery(this).data("alias")+"]="+d.a[t],void 0===(t=d.a[t].split(","))&&0==t.length||(jQuery("#"+e+" option").removeAttr("selected"),jQuery(r+" div").removeClass("on"),jQuery("#"+e+" input").removeAttr("checked"),jQuery(t).each(function(){jQuery("#"+e+" option[data-value-alias='"+this+"']").attr("selected","selected"),jQuery(r+" div[data-value-alias='"+this+"']").addClass("on"),jQuery("#"+e+" input[data-value-alias='"+this+"']").attr("checked","checked")}))):(void 0!==jQuery(this).find(":selected").data("value-alias")&&(a=jQuery(this).find(":selected").data("value-alias"),s=s+"a["+jQuery(this).data("alias")+"]="+a),void 0!==jQuery(this).find(":input:checked").data("value-alias")&&(jQuery.each(jQuery(this).find(":input:checked"),function(){""!=i&&(i+=","),i+=jQuery(this).data("value-alias")}),""!=i&&(s=s+"a["+jQuery(this).data("alias")+"]="+i))),h=jQuery(this).data("type-view"),n=jQuery(this).data("product-id"))}),(0!=e.dynamicChangePrice||0!=e.dynamicChangeStock||0!=e.dynamicChangeId||0!=e.dynamicChangeImage&&1!=e.dynamicChangeImage)&&(i=".phjAddToCartV"+h+"P"+n,e=jQuery(i).find("select").serialize(),i=jQuery(i).find(":checkbox").serialize(),phAjaxChangeAttributeData(n,h,e,i)),s.lastIndexOf("&")==s.length-1&&(s=s.slice(0,-1)),(0==u&&""!=s||1==u)&&(s="#"+s,""!=a&&t.val(Base64.encode(a+s)),window.history.pushState({},"",s))}jQuery(document).ready(function(){phChangeAttributeType(),phSetAttributeUrl(0);jQuery(document).on("change","select.phjProductAttribute",function(e){var t=Joomla.getOptions("phParamsPC");if(0==t.dynamicChangePrice&&0==t.dynamicChangeStock&&0==t.dynamicChangeId&&(0==t.dynamicChangeImage||1==t.dynamicChangeImage))return!1;var a=jQuery(this).data("type-view"),i=jQuery(this).data("product-id"),t=".phjAddToCartV"+a+"P"+i;phAjaxChangeAttributeData(i,a,jQuery(t).find("select").serialize(),jQuery(t).find(":checkbox").serialize()),phSetAttributeUrl(1)});var e=".ph-checkbox-attribute.phjProductAttribute";jQuery(document).on("click",e,function(e){var t=Joomla.getOptions("phParamsPC");if("LABEL"!==e.target.tagName.toUpperCase()){if("svg"==t.theme||"svg"==t.iconType){if("SVG"===e.target.tagName.toUpperCase()||"IMG"===e.target.tagName.toUpperCase())return}else if(!("bs4"!=t.theme&&"bs5"!=t.theme||"SPAN"!==e.target.tagName.toUpperCase()&&"IMG"!==e.target.tagName.toUpperCase()))return;var a=jQuery(this).data("required"),t="#"+jQuery(this).attr("id")+" input:checked",t=jQuery(t).length;if(a&&0==t)return jQuery(e.target).parent().addClass("active"),e.preventDefault(),!1;e="#"+jQuery(this).attr("id")+" input[type='checkbox']",e=jQuery(e);0<e.length&&e.each(function(e){var t=jQuery(this).parent();jQuery(this).is(":checked")?t.addClass("active"):t.removeClass("active")})}}),jQuery(document).on("click",e,function(e){var t=Joomla.getOptions("phParamsPC");if((0!=t.dynamicChangePrice||0!=t.dynamicChangeStock||0!=t.dynamicChangeId||0!=t.dynamicChangeImage&&1!=t.dynamicChangeImage)&&"LABEL"!==e.target.tagName.toUpperCase()){if("svg"==t.theme||"svg"==t.iconType){if("SVG"===e.target.tagName.toUpperCase()||"IMG"===e.target.tagName.toUpperCase())return}else if(!("bs4"!=t.theme&&"bs5"!=t.theme||"SPAN"!==e.target.tagName.toUpperCase()&&"IMG"!==e.target.tagName.toUpperCase()))return;var a=jQuery(this).data("product-id"),t=jQuery(this).data("type-view"),e=".phjAddToCartV"+t+"P"+a;phAjaxChangeAttributeData(a,t,jQuery(e).find("select").serialize(),jQuery(e).find(":checkbox").serialize()),phSetAttributeUrl(1)}}),jQuery(".phAOGift").on("input",function(){var e,t="."+jQuery(this).data("type");".phAOGiftType"==t?(e=jQuery(this).data("title"),jQuery(".phAOGiftTitle").text(e),e=jQuery(this).data("image"),jQuery(".phAOGiftImage").attr("src",e),e=jQuery(this).data("date"),jQuery(".phAOGiftDate").text(e),""!=(e=jQuery(this).data("description"))&&(e=Base64.decode(e)),jQuery(".phAOGiftDescription").html(e),e=jQuery(this).data("class-name"),jQuery(t).attr("class","phAOGiftType ph-gift-voucher-box "+e)):jQuery(t).text(jQuery(this).val())})});