function phRemoveUrlParameter(t,a){let e=a.split("?")[0];var r=[],a=-1!==a.indexOf("?")?a.split("?")[1]:"";if(""!==a){for(let e=(r=a.split("&")).length-1;0<=e;--e)r[e].split("=")[0]===t&&r.splice(e,1);e=e+"?"+r.join("&")}return e}function startOverlay(e){jQuery('<div id="phOverlayDiv"><div id="phLoaderFull"> </div></div>').appendTo(e),jQuery("#phOverlayDiv").fadeIn().css("display","block")}function startFullOverlay(e){2!=e&&(jQuery('<div id="phOverlay"><div id="phLoaderFull"> </div></div>').appendTo(document.body),jQuery("#phOverlay").fadeIn().css("display","block"))}function stopOverlay(){jQuery("#phOverlay").fadeIn().css("display","none")}function phRemoveParamFromUrl(t,e){let a=e.split("?")[0],r=[],i=-1!==e.indexOf("?")?e.split("?")[1]:"";if(""!==i){for(let e=(r=i.split("&")).length-1;0<=e;--e)r[e].split("=")[0]===t&&r.splice(e,1);a=a+"?"+r.join("&")}return a}function phUpdatePageAndParts(e,t){var a=Joomla.getOptions("phVarsPC"),r=Joomla.getOptions("phParamsModPhocacartSearch"),i=Joomla.getOptions("phParamsModPhocacartFilter");let n="/",o=("undefined"!=a.basePath&&""!=a.basePath||(n=""),""==e?window.history.pushState({},"",location.pathname):window.history.pushState({},"",e),""),p=(o=""!=e?(o=phRemoveParamFromUrl("format",e),e+"&format=raw"):"?format=raw",phRemoveParamFromUrl("option",o)),d=(p=phRemoveParamFromUrl("view",p),p=(p=phRemoveParamFromUrl("module",p)).substring(p.indexOf("?")+1),a.basePath+n+"index.php?option=com_ajax&module=phocacart_search"),s=a.basePath+n+"index.php?option=com_ajax&module=phocacart_filter";0==p.indexOf("?")?(d=d+"&"+p.substr(1),s=s+"&"+p.substr(1)):0==p.indexOf("&")?(d+=p,s+=p):(d=d+"&"+p,s=s+"&"+p),void 0!==r&&1==a.mod_phocacart_search&&0<parseInt(r.displayActiveParameters)&&phRenderPagePart({},"phSearchActiveTags",d),void 0===a||1!=a.mod_phocacart_filter||void 0===i||1!=i.limitToActiveCategory||1!=t&&2!=t||phRenderPagePart({},"phFilterBox",s),phRenderPage({},o)}function phRenderPage(e,t){var a=Joomla.getOptions("phVarsPC"),r=Joomla.getOptions("phParamsPC");const i="#"+a.renderPageOutput;var n=a.renderPageUrl;const o=a.isPOS,p=r.loadChosen;return startOverlay(i),jQuery.ajax({type:"POST",url:void 0!==t?t:n,async:!0,cache:"false",data:e,dataType:"HTML",success:function(e){jQuery(i).html(e),1==o&&phPosManagePage(),1==p&&jQuery("select").chosen("destroy").chosen({disable_search_threshold:10,allow_single_deselect:!0}),"function"==typeof phChangeAttributeType&&phChangeAttributeType(),"undefined"!=typeof phLazyLoadInstance&&phLazyLoadInstance&&phLazyLoadInstance.update(),stopOverlay()}}),!1}function phRenderPagePart(e,t,a){jQuery.ajax({type:"POST",url:a,async:!0,cache:"false",data:e,dataType:"HTML",success:function(e){t="."+t,jQuery(t).html(e)}})}function phDisableRequirement(){var e=Joomla.getOptions("phParamsPC").loadChosen,t=jQuery("#jform_country_phs"),a=jQuery("#jform_region_phs");jQuery("#phCheckoutBillingSameAsShipping").prop("checked")?(jQuery(".phShippingFormFields").prop("readonly",!0),t.attr("disabled","disabled"),a.attr("disabled","disabled"),jQuery(".phShippingFormFieldsRequired").removeAttr("aria-required"),jQuery(".phShippingFormFieldsRequired").removeAttr("required"),0<e&&(jQuery(".phShippingFormFieldsRequired").trigger("chosen:updated"),jQuery(".phShippingFormFields").trigger("chosen:updated")),jQuery("#phShippingAddress").addClass("ph-disabled")):(jQuery(".phShippingFormFieldsRequired").prop("aria-required","true"),jQuery(".phShippingFormFieldsRequired").prop("required","true"),jQuery(".phShippingFormFields").removeAttr("readonly"),t.removeAttr("disabled"),a.removeAttr("disabled"),0<e&&(jQuery(".phShippingFormFieldsRequired").trigger("chosen:updated"),jQuery(".phShippingFormFields").trigger("chosen:updated")),jQuery("#phShippingAddress").removeClass("ph-disabled"))}function phRenderBillingAndShippingSame(){phDisableRequirement(),jQuery("#phCheckoutBillingSameAsShipping").on("click",function(){phDisableRequirement()})}function phEventChangeFormPagination(e,t){var a=Joomla.getOptions("phVarsPC"),r=Joomla.getOptions("phParamsPC"),i=jQuery(t).val(),t="#"+jQuery(t).attr("id")+"top",t=(jQuery(t).val(i),jQuery(e).attr("name"));1==r.ajaxPaginationCategory||1==a.isPOS?(i=window.location.href,phRenderPage(jQuery(e).serialize(),i)):"phitemstopboxform"==t?(r=window.location.href,phRenderPage(jQuery(e).serialize(),r)):(e.submit(),startFullOverlay(1))}function phNumberFormat(e,t,a,r){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var i,n,o,e=isFinite(+e)?+e:0,t=isFinite(+t)?Math.abs(t):0,r=void 0===r?",":r,a=void 0===a?".":a,p="";return 3<(p=(t?(i=e,n=t,o=Math.pow(10,n),""+(Math.round(i*o)/o).toFixed(n)):""+Math.round(e)).split("."))[0].length&&(p[0]=p[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,r)),(p[1]||"").length<t&&(p[1]=p[1]||"",p[1]+=new Array(t-p[1].length+1).join("0")),p.join(a)}function phHandleAddToCartEvent(e){var e=new FormData(e),t=e.get("id"),a=parseInt(e.get("quantity"))||1,r=e.get("basepricenetto")||"",i=e.get("basepricetax")||"",n=e.get("basepricebrutto")||"",o=e.get("sku")||"",p=e.get("ean")||"",e=e.get("title")||"";document.dispatchEvent(new CustomEvent("PhocaCart.addToCart",{detail:{items:[{id:t,sku:o,ean:p,title:e,basepricenetto:r,basepricetax:i,basepricebrutto:n,quantity:a}]}}))}function phHandleAddPaymentEvent(e){var t=new FormData(e),e=e.querySelector('input[name="phpaymentopt"]:checked'),e=(e&&(e=e.getAttribute("data-payment-title"),t.append("paymentTitle",e)),t.get("phpaymentopt")||""),t=t.get("paymentTitle")||"";document.dispatchEvent(new CustomEvent("PhocaCart.addPaymentInfo",{detail:{items:[{id:e,title:t}]}}))}function phHandleAddShippingEvent(e){var t=new FormData(e),e=e.querySelector('input[name="phshippingopt"]:checked'),e=(e&&(e=e.getAttribute("data-shipping-title"),t.append("shippingTitle",e)),t.get("phshippingopt")||""),t=t.get("shippingTitle")||"";document.dispatchEvent(new CustomEvent("PhocaCart.addShippingInfo",{detail:{items:[{id:e,title:t}]}}))}jQuery(document).ready(function(){jQuery(".phItemSwitchLayoutType").on("click",function(e){var t=jQuery(this).data("layouttype"),a=jQuery(this).closest("form").serialize()+"&layouttype="+t,t=(jQuery(".phItemSwitchLayoutType").removeClass("active"),jQuery(".phItemSwitchLayoutType."+t).addClass("active"),window.location.href);phRenderPage(a,t)}),jQuery(document).on("click",".phPaginationBox .pagination li a",function(e){var t=Joomla.getOptions("phVarsPC");1!=Joomla.getOptions("phParamsPC").ajaxPaginationCategory&&1!=t.isPOS||(t=jQuery(this).attr("href"),phRenderPage(jQuery(this).closest("form").serialize(),t),t=phRemoveUrlParameter("format",t),t=phRemoveUrlParameter("start",t),window.history.pushState("","",t),e.preventDefault())}),phRenderBillingAndShippingSame()}),document.addEventListener("DOMContentLoaded",function(){document.addEventListener("submit",function(e){var t=Joomla.getOptions("phParamsPC");e.target&&e.target.matches("form.phItemCartBoxForm")&&(e.preventDefault(),phHandleAddToCartEvent(e.target),0==t.addToCartMethod)&&setTimeout(function(){e.target.submit()},200),e.target&&e.target.matches("form.phCheckoutPaymentBoxForm")&&(e.preventDefault(),phHandleAddPaymentEvent(e.target),setTimeout(function(){e.target.submit()},200)),e.target&&e.target.matches("form.phCheckoutShippingBoxForm")&&(e.preventDefault(),phHandleAddShippingEvent(e.target),setTimeout(function(){e.target.submit()},200))},!0)});