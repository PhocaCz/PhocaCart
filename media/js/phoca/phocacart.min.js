"use strict";function phRemoveUrlParameter(e,r){var a=r.split("?")[0],i=[],r=-1!==r.indexOf("?")?r.split("?")[1]:"";if(""!==r){for(var t=(i=r.split("&")).length-1;0<=t;--t)i[t].split("=")[0]===e&&i.splice(t,1);a=a+"?"+i.join("&")}return a}function startOverlay(e){jQuery('<div id="phOverlayDiv"><div id="phLoaderFull"> </div></div>').appendTo(e),jQuery("#phOverlayDiv").fadeIn().css("display","block")}function startFullOverlay(e){2==e||(jQuery('<div id="phOverlay"><div id="phLoaderFull"> </div></div>').appendTo(document.body),jQuery("#phOverlay").fadeIn().css("display","block"))}function stopOverlay(){jQuery("#phOverlay").fadeIn().css("display","none")}function phRemoveParamFromUrl(e,r){var a=r.split("?")[0],i=[],r=-1!==r.indexOf("?")?r.split("?")[1]:"";if(""!==r){for(var t=(i=r.split("&")).length-1;0<=t;--t)i[t].split("=")[0]===e&&i.splice(t,1);a=a+"?"+i.join("&")}return a}function phUpdatePageAndParts(e,r){var a=Joomla.getOptions("phVarsPC"),i=Joomla.getOptions("phParamsModPhocacartSearch"),t="/";"undefined"!=a.basePath&&""!=a.basePath||(t=""),""==e?window.history.pushState({},"",location.pathname):window.history.pushState({},"",e);var o="",o=""!=e?(o=phRemoveParamFromUrl("format",e),e+"&format=raw"):"?format=raw",p=phRemoveParamFromUrl("option",o),p=phRemoveParamFromUrl("view",p);p=(p=phRemoveParamFromUrl("module",p)).substring(p.indexOf("?")+1);e=a.basePath+t+"index.php?option=com_ajax&module=phocacart_search",t=a.basePath+t+"index.php?option=com_ajax&module=phocacart_filter";0==p.indexOf("?")?(e=e+"&"+p.substr(1),t=t+"&"+p.substr(1)):0==p.indexOf("&")?(e+=p,t+=p):(e=e+"&"+p,t=t+"&"+p),void 0!==i&&1==a.mod_phocacart_search&&1==i.displayActiveParameters&&phRenderPagePart({},"phSearchActiveTags",e),void 0!==a&&1==a.mod_phocacart_filter&&2==r&&phRenderPagePart({},"phFilterBox",t),phRenderPage({},o)}function phRenderPage(e,r){var a=Joomla.getOptions("phVarsPC"),i=Joomla.getOptions("phParamsPC"),t="#"+a.renderPageOutput,o=a.renderPageUrl,p=a.isPOS,n=i.loadChosen;return startOverlay(t),o=void 0!==r?r:o,jQuery.ajax({type:"POST",url:o,async:!0,cache:"false",data:e,dataType:"HTML",success:function(e){jQuery(t).html(e),1==p&&phPosManagePage(),1==n&&jQuery("select").chosen("destroy").chosen({disable_search_threshold:10,allow_single_deselect:!0}),"function"==typeof phChangeAttributeType&&phChangeAttributeType(),"undefined"!=typeof phLazyLoadInstance&&phLazyLoadInstance&&phLazyLoadInstance.update(),stopOverlay()}}),!1}function phRenderPagePart(e,r,a){jQuery.ajax({type:"POST",url:a,async:!0,cache:"false",data:e,dataType:"HTML",success:function(e){r="#"+r,jQuery(r).html(e)}})}function phDisableRequirement(){var e=Joomla.getOptions("phParamsPC").loadChosen,r=jQuery("#jform_country_phs"),a=jQuery("#jform_region_phs");jQuery("#phCheckoutBillingSameAsShipping").prop("checked")?(jQuery(".phShippingFormFields").prop("readonly",!0),r.attr("disabled","disabled"),a.attr("disabled","disabled"),jQuery(".phShippingFormFieldsRequired").removeAttr("aria-required"),jQuery(".phShippingFormFieldsRequired").removeAttr("required"),0<e&&(jQuery(".phShippingFormFieldsRequired").trigger("chosen:updated"),jQuery(".phShippingFormFields").trigger("chosen:updated")),jQuery("#phShippingAddress").addClass("ph-disabled")):(jQuery(".phShippingFormFieldsRequired").prop("aria-required","true"),jQuery(".phShippingFormFieldsRequired").prop("required","true"),jQuery(".phShippingFormFields").removeAttr("readonly"),r.removeAttr("disabled"),a.removeAttr("disabled"),0<e&&(jQuery(".phShippingFormFieldsRequired").trigger("chosen:updated"),jQuery(".phShippingFormFields").trigger("chosen:updated")),jQuery("#phShippingAddress").removeClass("ph-disabled"))}function phRenderBillingAndShippingSame(){phDisableRequirement(),jQuery("#phCheckoutBillingSameAsShipping").on("click",function(){phDisableRequirement()})}function phEventChangeFormPagination(e,r){var a=Joomla.getOptions("phVarsPC"),i=Joomla.getOptions("phParamsPC"),t=jQuery(r).val(),r="#"+jQuery(r).attr("id")+"top";jQuery(r).val(t);t=jQuery(e).attr("name");1==i.ajaxPaginationCategory||1==a.isPOS?(a=window.location.href,phRenderPage(jQuery(e).serialize(),a)):"phitemstopboxform"==t?(t=window.location.href,phRenderPage(jQuery(e).serialize(),t)):(e.submit(),startFullOverlay(1))}function phNumberFormat(e,r,a,i){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var t,o,p,n=isFinite(+e)?+e:0,e=isFinite(+r)?Math.abs(r):0,r=void 0===i?",":i,i=void 0===a?".":a,a="";return 3<(a=(e?(t=n,o=e,p=Math.pow(10,o),""+(Math.round(t*p)/p).toFixed(o)):""+Math.round(n)).split("."))[0].length&&(a[0]=a[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,r)),(a[1]||"").length<e&&(a[1]=a[1]||"",a[1]+=new Array(e-a[1].length+1).join("0")),a.join(i)}jQuery(document).ready(function(){jQuery(".phItemSwitchLayoutType").on("click",function(e){var r=jQuery(this).data("layouttype"),a=jQuery(this).closest("form").serialize()+"&layouttype="+r;jQuery(".phItemSwitchLayoutType").removeClass("active"),jQuery(".phItemSwitchLayoutType."+r).addClass("active"),phRenderPage(a,window.location.href)}),jQuery(document).on("click",".phPaginationBox .pagination li a",function(e){var r=Joomla.getOptions("phVarsPC");1!=Joomla.getOptions("phParamsPC").ajaxPaginationCategory&&1!=r.isPOS||(r=jQuery(this).attr("href"),phRenderPage(jQuery(this).closest("form").serialize(),r),r=phRemoveUrlParameter("format",r),r=phRemoveUrlParameter("start",r),window.history.pushState("","",r),e.preventDefault())}),phRenderBillingAndShippingSame()});