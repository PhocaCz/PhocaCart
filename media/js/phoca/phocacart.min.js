function phRemoveUrlParameter(a,r){let e=r.split("?")[0];var t=[],r=-1!==r.indexOf("?")?r.split("?")[1]:"";if(""!==r){for(let e=(t=r.split("&")).length-1;0<=e;--e)t[e].split("=")[0]===a&&t.splice(e,1);e=e+"?"+t.join("&")}return e}function startOverlay(e){jQuery('<div id="phOverlayDiv"><div id="phLoaderFull"> </div></div>').appendTo(e),jQuery("#phOverlayDiv").fadeIn().css("display","block")}function startFullOverlay(e){2!=e&&(jQuery('<div id="phOverlay"><div id="phLoaderFull"> </div></div>').appendTo(document.body),jQuery("#phOverlay").fadeIn().css("display","block"))}function stopOverlay(){jQuery("#phOverlay").fadeIn().css("display","none")}function phRemoveParamFromUrl(a,e){let r=e.split("?")[0],t=[],i=-1!==e.indexOf("?")?e.split("?")[1]:"";if(""!==i){for(let e=(t=i.split("&")).length-1;0<=e;--e)t[e].split("=")[0]===a&&t.splice(e,1);r=r+"?"+t.join("&")}return r}function phUpdatePageAndParts(e,a){var r=Joomla.getOptions("phVarsPC"),t=Joomla.getOptions("phParamsModPhocacartSearch"),i=Joomla.getOptions("phParamsModPhocacartFilter");let o="/",p=("undefined"!=r.basePath&&""!=r.basePath||(o=""),""==e?window.history.pushState({},"",location.pathname):window.history.pushState({},"",e),""),n=(p=""!=e?(p=phRemoveParamFromUrl("format",e),e+"&format=raw"):"?format=raw",phRemoveParamFromUrl("option",p)),s=(n=phRemoveParamFromUrl("view",n),n=(n=phRemoveParamFromUrl("module",n)).substring(n.indexOf("?")+1),r.basePath+o+"index.php?option=com_ajax&module=phocacart_search"),h=r.basePath+o+"index.php?option=com_ajax&module=phocacart_filter";0==n.indexOf("?")?(s=s+"&"+n.substr(1),h=h+"&"+n.substr(1)):0==n.indexOf("&")?(s+=n,h+=n):(s=s+"&"+n,h=h+"&"+n),void 0!==t&&1==r.mod_phocacart_search&&1==t.displayActiveParameters&&phRenderPagePart({},"phSearchActiveTags",s),void 0===r||1!=r.mod_phocacart_filter||void 0===i||1!=i.limitToActiveCategory||1!=a&&2!=a||phRenderPagePart({},"phFilterBox",h),phRenderPage({},p)}function phRenderPage(e,a){var r=Joomla.getOptions("phVarsPC"),t=Joomla.getOptions("phParamsPC");const i="#"+r.renderPageOutput;var o=r.renderPageUrl;const p=r.isPOS,n=t.loadChosen;return startOverlay(i),jQuery.ajax({type:"POST",url:void 0!==a?a:o,async:!0,cache:"false",data:e,dataType:"HTML",success:function(e){jQuery(i).html(e),1==p&&phPosManagePage(),1==n&&jQuery("select").chosen("destroy").chosen({disable_search_threshold:10,allow_single_deselect:!0}),"function"==typeof phChangeAttributeType&&phChangeAttributeType(),"undefined"!=typeof phLazyLoadInstance&&phLazyLoadInstance&&phLazyLoadInstance.update(),stopOverlay()}}),!1}function phRenderPagePart(e,a,r){jQuery.ajax({type:"POST",url:r,async:!0,cache:"false",data:e,dataType:"HTML",success:function(e){a="."+a,jQuery(a).html(e)}})}function phDisableRequirement(){var e=Joomla.getOptions("phParamsPC").loadChosen,a=jQuery("#jform_country_phs"),r=jQuery("#jform_region_phs");jQuery("#phCheckoutBillingSameAsShipping").prop("checked")?(jQuery(".phShippingFormFields").prop("readonly",!0),a.attr("disabled","disabled"),r.attr("disabled","disabled"),jQuery(".phShippingFormFieldsRequired").removeAttr("aria-required"),jQuery(".phShippingFormFieldsRequired").removeAttr("required"),0<e&&(jQuery(".phShippingFormFieldsRequired").trigger("chosen:updated"),jQuery(".phShippingFormFields").trigger("chosen:updated")),jQuery("#phShippingAddress").addClass("ph-disabled")):(jQuery(".phShippingFormFieldsRequired").prop("aria-required","true"),jQuery(".phShippingFormFieldsRequired").prop("required","true"),jQuery(".phShippingFormFields").removeAttr("readonly"),a.removeAttr("disabled"),r.removeAttr("disabled"),0<e&&(jQuery(".phShippingFormFieldsRequired").trigger("chosen:updated"),jQuery(".phShippingFormFields").trigger("chosen:updated")),jQuery("#phShippingAddress").removeClass("ph-disabled"))}function phRenderBillingAndShippingSame(){phDisableRequirement(),jQuery("#phCheckoutBillingSameAsShipping").on("click",function(){phDisableRequirement()})}function phEventChangeFormPagination(e,a){var r=Joomla.getOptions("phVarsPC"),t=Joomla.getOptions("phParamsPC"),i=jQuery(a).val(),a="#"+jQuery(a).attr("id")+"top",a=(jQuery(a).val(i),jQuery(e).attr("name"));1==t.ajaxPaginationCategory||1==r.isPOS?(i=window.location.href,phRenderPage(jQuery(e).serialize(),i)):"phitemstopboxform"==a?(t=window.location.href,phRenderPage(jQuery(e).serialize(),t)):(e.submit(),startFullOverlay(1))}function phNumberFormat(e,a,r,t){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var i,o,p,e=isFinite(+e)?+e:0,a=isFinite(+a)?Math.abs(a):0,t=void 0===t?",":t,r=void 0===r?".":r,n="";return 3<(n=(a?(i=e,o=a,p=Math.pow(10,o),""+(Math.round(i*p)/p).toFixed(o)):""+Math.round(e)).split("."))[0].length&&(n[0]=n[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,t)),(n[1]||"").length<a&&(n[1]=n[1]||"",n[1]+=new Array(a-n[1].length+1).join("0")),n.join(r)}jQuery(document).ready(function(){jQuery(".phItemSwitchLayoutType").on("click",function(e){var a=jQuery(this).data("layouttype"),r=jQuery(this).closest("form").serialize()+"&layouttype="+a,a=(jQuery(".phItemSwitchLayoutType").removeClass("active"),jQuery(".phItemSwitchLayoutType."+a).addClass("active"),window.location.href);phRenderPage(r,a)}),jQuery(document).on("click",".phPaginationBox .pagination li a",function(e){var a=Joomla.getOptions("phVarsPC");1!=Joomla.getOptions("phParamsPC").ajaxPaginationCategory&&1!=a.isPOS||(a=jQuery(this).attr("href"),phRenderPage(jQuery(this).closest("form").serialize(),a),a=phRemoveUrlParameter("format",a),a=phRemoveUrlParameter("start",a),window.history.pushState("","",a),e.preventDefault())}),phRenderBillingAndShippingSame()});