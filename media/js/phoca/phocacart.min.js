function phRemoveUrlParameter(e,a){var r=a.split("?")[0],t=[],a=-1!==a.indexOf("?")?a.split("?")[1]:"";if(""!==a){for(var i=(t=a.split("&")).length-1;0<=i;--i)paramV=t[i].split("=")[0],paramV===e&&t.splice(i,1);r=r+"?"+t.join("&")}return r}function startOverlay(e){jQuery('<div id="phOverlayDiv"><div id="phLoaderFull"> </div></div>').appendTo(e),jQuery("#phOverlayDiv").fadeIn().css("display","block")}function startFullOverlay(e){2==e||(jQuery('<div id="phOverlay"><div id="phLoaderFull"> </div></div>').appendTo(document.body),jQuery("#phOverlay").fadeIn().css("display","block"))}function stopOverlay(){jQuery("#phOverlay").fadeIn().css("display","none")}function phRemoveParamFromUrl(e,a){var r=a.split("?")[0],t=[],a=-1!==a.indexOf("?")?a.split("?")[1]:"";if(""!==a){for(var i=(t=a.split("&")).length-1;0<=i;--i)t[i].split("=")[0]===e&&t.splice(i,1);r=r+"?"+t.join("&")}return r}function phUpdatePageAndParts(e,a){var r,t=Joomla.getOptions("phVarsPC"),i=Joomla.getOptions("phParamsModPhocacartSearch"),o="/";"undefined"!=t.basePath&&""!=t.basePath||(o=""),window.history.pushState({},"",e),r=""!=e?(r=phRemoveParamFromUrl("format",e),e+"&format=raw"):"?format=raw";var n=phRemoveParamFromUrl("option",r),n=phRemoveParamFromUrl("view",n);n=(n=phRemoveParamFromUrl("module",n)).substring(n.indexOf("?")+1);e=t.basePath+o+"index.php?option=com_ajax&module=phocacart_search",o=t.basePath+o+"index.php?option=com_ajax&module=phocacart_filter";0==n.indexOf("?")?(e=e+"&"+n.substr(1),o=o+"&"+n.substr(1)):0==n.indexOf("&")?(e+=n,o+=n):(e=e+"&"+n,o=o+"&"+n),void 0!==i&&1==t.mod_phocacart_search&&1==i.displayActiveParameters&&phRenderPagePart({},"phSearchActiveTags",e),void 0!==t&&1==t.mod_phocacart_filter&&2==a&&phRenderPagePart({},"phFilterBox",o),phRenderPage({},r)}function phRenderPage(e,a){var r=Joomla.getOptions("phVarsPC"),t=Joomla.getOptions("phParamsPC"),i="#"+r.renderPageOutput,o=r.renderPageUrl,n=r.isPOS,p=t.loadChosen;return startOverlay(i),o=void 0!==a?a:o,phRequest=jQuery.ajax({type:"POST",url:o,async:!0,cache:"false",data:e,dataType:"HTML",success:function(e){jQuery(i).html(e),1==n&&phPosManagePage(),1==p&&jQuery("select").chosen("destroy").chosen({disable_search_threshold:10,allow_single_deselect:!0}),"function"==typeof phChangeAttributeType&&phChangeAttributeType(),"undefined"!=typeof phLazyLoadInstance&&phLazyLoadInstance&&phLazyLoadInstance.update(),stopOverlay()}}),!1}function phRenderPagePart(e,a,r){phRequest=jQuery.ajax({type:"POST",url:r,async:!0,cache:"false",data:e,dataType:"HTML",success:function(e){a="#"+a,jQuery(a).html(e)}})}function phDisableRequirement(){var e=Joomla.getOptions("phParamsPC").loadChosen,a=jQuery("#jform_country_phs"),r=jQuery("#jform_region_phs");jQuery("#phCheckoutBillingSameAsShipping").prop("checked")?(jQuery(".phShippingFormFields").prop("readonly",!0),a.attr("disabled","disabled"),r.attr("disabled","disabled"),jQuery(".phShippingFormFieldsRequired").removeAttr("aria-required"),jQuery(".phShippingFormFieldsRequired").removeAttr("required")):(jQuery(".phShippingFormFieldsRequired").prop("aria-required","true"),jQuery(".phShippingFormFieldsRequired").prop("required","true"),jQuery(".phShippingFormFields").removeAttr("readonly"),a.removeAttr("disabled"),r.removeAttr("disabled")),0<e&&(jQuery(".phShippingFormFieldsRequired").trigger("chosen:updated"),jQuery(".phShippingFormFields").trigger("chosen:updated"))}function phRenderBillingAndShippingSame(){phDisableRequirement(),jQuery("#phCheckoutBillingSameAsShipping").on("click",function(){phDisableRequirement()})}function phEventChangeFormPagination(e,a){var r=Joomla.getOptions("phVarsPC"),t=Joomla.getOptions("phParamsPC"),i=jQuery(a).val(),a="#"+jQuery(a).attr("id")+"top";jQuery(a).val(i);i=jQuery(e).attr("name");1==t.ajaxPaginationCategory||1==r.isPOS||"phitemstopboxform"==i?(i=window.location.href,phRenderPage(jQuery(e).serialize(),i)):(e.submit(),startFullOverlay(1))}function phNumberFormat(e,a,r,t){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var i,o,n,p=isFinite(+e)?+e:0,e=isFinite(+a)?Math.abs(a):0,a=void 0===t?",":t,t=void 0===r?".":r,r="";return 3<(r=(e?(i=p,o=e,n=Math.pow(10,o),""+(Math.round(i*n)/n).toFixed(o)):""+Math.round(p)).split("."))[0].length&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,a)),(r[1]||"").length<e&&(r[1]=r[1]||"",r[1]+=new Array(e-r[1].length+1).join("0")),r.join(t)}jQuery(document).ready(function(){jQuery(".phItemSwitchLayoutType").on("click",function(e){var a=jQuery(this).data("layouttype"),r=jQuery(this).closest("form").serialize()+"&layouttype="+a;jQuery(".phItemSwitchLayoutType").removeClass("active"),jQuery(".phItemSwitchLayoutType."+a).addClass("active"),phRenderPage(r,window.location.href)}),jQuery(document).on("click",".phPaginationBox .pagination li a",function(e){var a=Joomla.getOptions("phVarsPC");1!=Joomla.getOptions("phParamsPC").ajaxPaginationCategory&&1!=a.isPOS||(a=jQuery(this).attr("href"),phRenderPage(jQuery(this).closest("form").serialize(),a),a=phRemoveUrlParameter("format",a),a=phRemoveUrlParameter("start",a),window.history.pushState("","",a),e.preventDefault())}),phRenderBillingAndShippingSame()});