let phFilterNewUrlSet="",phFilterNewUrlRemove="",phFilterNewUrlSetPreviousParamWaiting=0,phFilterNewUrlRemovePreviousParamWaiting=0;function phEscapeRegExp(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function phReplaceAll(e,r,t){return t.replace(new RegExp(phEscapeRegExp(e),"g"),r)}function phEncode(e){e=encodeURIComponent(e);return e=phReplaceAll("%5B","[",e),e=phReplaceAll("%5D","]",e),e=phReplaceAll("%2C",",",e),phReplaceAll("%3A",":",e)}function phArrayToString(e){e=phReplaceAll("[","(",e);return phReplaceAll("]",")",e)}function phStringToArray(e){e=phReplaceAll("(","[",e);return phReplaceAll(")","]",e)}function phCleanArray(r){var t=[];for(let e=0;e<r.length;e++)r[e]&&t.push(r[e]);return t}function phCleanEmptyParams(e){return e.replace(/&?[^&?]+=(?=(?:&|$))/g,"")}function phCleanAloneQuestionMark(e){return e="?"==(e="?&"==e?"?":e)?"":e}function phFilterValue(e){e=phReplaceAll("<","",e);return phReplaceAll(">","",e)}function phResetNewUrl(e){phFilterNewUrlRemove="",phFilterNewUrlSet="",1==e&&(phFilterNewUrlRemovePreviousParamWaiting=0,phFilterNewUrlSetPreviousParamWaiting=0)}function phIsString(e){return"string"==typeof e}function phGetQueryString(e){return e.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function phUrlParam(e){if(null==e)return"";const i=[],l=/\[\]$/,a=(e,r)=>{let t="function"==typeof r?r():r;null==t&&(t=""),i.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},n=(t,e)=>{if(Array.isArray(e))e.forEach((e,r)=>{l.test(t)?a(t,e):(r="object"==typeof e&&null!=e?r:"",n(t+`[${r}]`,e))});else if("object"==typeof e&&null!=e)for(var[r,i]of Object.entries(e))n(`${t}[${r}]`,i);else a(t,e)};if(Array.isArray(e))e.forEach(e=>a(e.name,e.value));else for(var[r,t]of Object.entries(e))n(r,t);return i.join("&")}function phUrlDeParam(e,n){let o={},p={true:!0,false:!1,null:null};return e.replace(/\+/g," ").split("&").forEach(function(e){e=e.split("=");let r=decodeURIComponent(e[0]),t="",i=o,l=r.split("]["),a=l.length-1;if(a=/\[/.test(l[0])&&/\]$/.test(l[a])?(l[a]=l[a].replace(/\]$/,""),(l=l.shift().split("[").concat(l)).length-1):0,2===e.length)if(t=decodeURIComponent(e[1]),n&&(t=t&&!isNaN(t)?+t:"undefined"===t?void 0:void 0!==p[t]?p[t]:t),a)for(let e=0;e<=a;e++)r=""===l[e]?i.length:l[e],i=i[r]=e<a?i[r]||(l[e+1]&&isNaN(l[e+1])?{}:[]):t;else Array.isArray(o[r])?o[r].push(t):void 0!==o[r]?o[r]=[o[r],t]:o[r]=t;else r&&(o[r]=n?void 0:"")}),o}function phUrlParamQueryString(e,r,t){let i="",l="";var a,n,o;return i=void 0!==r?(o=(a=e.match(/^([^#?]*)\??([^#]*)(#?.*)/))[3]||"",l=2===t&&phIsString(r)?r.replace(/^.*\?|#.*$/g,""):(n=phUrlDeParam(a[2]),r=phIsString(r)?phUrlDeParamQueryString(r):r,phUrlParam(l=2===t?r:1===t?{...r,...n}:{...n,...r})),a[1]+(l||!a[1]?"?":"")+l+o):phGetQueryString(void 0!==e?e:window.location.href)}function phUrlDeParamQueryString(e,r){return phUrlDeParam(e=void 0===e||"boolean"==typeof e?(r=e,phUrlParamQueryString()):phIsString(e)?e.replace(/^.*\?|#.*$/g,""):e,r)}function phRemoveFilter(r,t,e,i,l,a,n,o){var p=Joomla.getOptions("phParamsPC"),h=(1!=p.ajaxSearchingFilteringItems&&(phFilterNewUrlSet=i),r=phArrayToString(r),phUrlParamQueryString()),h=phArrayToString(h);let c,s={},m=0;if(void 0!==(c=""!==phFilterNewUrlRemove||1==phFilterNewUrlRemovePreviousParamWaiting?phUrlDeParamQueryString(phFilterNewUrlRemove):phUrlDeParamQueryString(h)).start&&(s.start=""),void 0!==c.limitstart&&(s.limitstart=""),1==a)delete c[r],s=c,m=2;else if(void 0!==c[r]){let e=c[r];h=e.split(",");-1!==(h=phCleanArray(h)).indexOf(t)&&(-1<(a=h.indexOf(t))&&h.splice(a,1),(e=h.join())?s[r]=e:(delete c[r],s=c,m=2))}else delete c[r],s=c,m=2;let u;if(1==e&&1!=l||1!=e)""==(u=i)&&(u=document.location.pathname),document.location=u;else if(u=location.search,u=phArrayToString(u=""===phFilterNewUrlRemove&&1!=phFilterNewUrlRemovePreviousParamWaiting?u:phFilterNewUrlRemove),phFilterNewUrlRemove=phReplaceAll("%2C",",",phFilterNewUrlRemove=phUrlParamQueryString(u,s,m)),phFilterNewUrlRemove=phReplaceAll("%5B","[",phFilterNewUrlRemove),phFilterNewUrlRemove=phReplaceAll("%5D","]",phFilterNewUrlRemove),phFilterNewUrlRemove=phCleanAloneQuestionMark(phFilterNewUrlRemove=phStringToArray(phFilterNewUrlRemove=phReplaceAll("%3A",":",phFilterNewUrlRemove))),1==n){if((phFilterNewUrlRemovePreviousParamWaiting=1)==e&&1==p.ajaxSearchingFilteringItems)return 2}else{if(1==e&&1==p.ajaxSearchingFilteringItems)return phUpdatePageAndParts(phFilterNewUrlRemove,o),phResetNewUrl(1),2;""==phFilterNewUrlRemove&&(phFilterNewUrlRemove=document.location.pathname),document.location=phFilterNewUrlRemove,phResetNewUrl()}return 1}function phSetFilter(r,t,e,i,l,a,n,o){var p=Joomla.getOptions("phParamsPC"),h=(t=phFilterValue(t),r=phArrayToString(r),phUrlParamQueryString()),h=phArrayToString(h);let c;var s={};if(void 0!==(c=1==phFilterNewUrlSetPreviousParamWaiting?phUrlDeParamQueryString(phFilterNewUrlSet=phArrayToString(phFilterNewUrlSet)):phUrlDeParamQueryString(h)).start&&(s.start=""),void 0!==c.limitstart&&(s.limitstart=""),1==a)s[r]=t;else if(""!==t)if(void 0!==c[r]){let e=c[r];h=e.split(",");-1===(h=phCleanArray(h)).indexOf(t)&&(h.push(t),e=h.join()),s[r]=e}else s[r]=t;let m;if(m=1==e&&1!=l||1!=e?i:location.search,m=phArrayToString(m=1==phFilterNewUrlSetPreviousParamWaiting?phFilterNewUrlSet:m),phFilterNewUrlSet=phReplaceAll("%2C",",",phFilterNewUrlSet=phUrlParamQueryString(m,s,0)),phFilterNewUrlSet=phReplaceAll("%5B","[",phFilterNewUrlSet),phFilterNewUrlSet=phReplaceAll("%5D","]",phFilterNewUrlSet),phFilterNewUrlSet=phCleanAloneQuestionMark(phFilterNewUrlSet=phCleanEmptyParams(phFilterNewUrlSet=phStringToArray(phFilterNewUrlSet=phReplaceAll("%3A",":",phFilterNewUrlSet)))),1==n){if((phFilterNewUrlSetPreviousParamWaiting=1)==e&&1==p.ajaxSearchingFilteringItems)return 2}else{if(1==e&&1==p.ajaxSearchingFilteringItems)return phUpdatePageAndParts(phFilterNewUrlSet,o),phResetNewUrl(1),2;document.location=phFilterNewUrlSet,phResetNewUrl()}return 1}function phChangeFilter(e,r,t,i,l,a,n){var o=Joomla.getOptions("phVarsModPhocacartFilter"),p=Joomla.getOptions("phParamsModPhocacartFilter"),h=o.isItemsView,c=o.isSef;let s=o.urlItemsView;var o=o.urlItemsViewWithoutParams;let m=1;"itemview"==i?(void 0===r&&(r=""),m=phSetFilter(e,r,1,0,1,l,a,n)):"text"==i?m=(1==t?phSetFilter:phRemoveFilter)(e,r,h,s,1,l,a,n):"category"==i?(s=o,1!=p.removeParametersCat&&(o=phUrlParamQueryString(),1==h)?1==c?document.location=phUrlParamQueryString(s,o,2):phRemoveFilter(e,r,h,s,1,l,a,n):document.location=s):"color"==i||"image"==i?jQuery(t).hasClass("on")?(m=phRemoveFilter(e,r,h,s,1,l,a,n),jQuery(t).removeClass("on")):(m=phSetFilter(e,r,h,s,1,l,a,n),jQuery(t).addClass("on")):m=(t.checked?phSetFilter:phRemoveFilter)(e,r,h,s,1,l,a,n);var u,p=document.getElementById("phItemFilterBoxOffCanvas");p&&(u=bootstrap.Offcanvas.getInstance(p),setTimeout(function(){u.hide()},500)),startFullOverlay(m)}function phChangeSearch(e,r,t){phHandleSearchEvent(r);var i=Joomla.getOptions("phVarsModPhocacartSearch"),l=Joomla.getOptions("phParamsModPhocacartSearch"),a=i.isItemsView;let n=i.urlItemsView;i=i.urlItemsViewWithoutParams;let o=1,p=a;o=(1==t?(1==l.searchOptions?0<jQuery(".phSearchBoxSearchAllProducts:checked").length&&(n=i,p=0):p=0,phSetFilter):phRemoveFilter)(e,r,a,n,p,1,0,2);t=document.getElementById("phItemSearchBoxOffCanvas");t&&bootstrap.Offcanvas.getInstance(t).hide(),startFullOverlay(o)}function phPriceFilterRange(){const i=Joomla.getOptions("phParamsPC"),l=Joomla.getOptions("phLangPC");"function"==typeof jQuery("#phPriceFilterRange").slider&&jQuery("#phPriceFilterRange").slider({range:!0,min:i.filterPriceMin,max:i.filterPriceMax,values:[i.filterPriceFrom,i.filterPriceTo],slide:function(e,r){jQuery("#phPriceFromTopricefrom").val(r.values[0]),jQuery("#phPriceFromTopriceto").val(r.values[1]),jQuery("#phPriceFilterPrice").html(l.COM_PHOCACART_PRICE+": "+phGetPriceFormat(r.values[0])+" - "+phGetPriceFormat(r.values[1]))}}),jQuery("#phPriceFilterPrice").html(l.COM_PHOCACART_PRICE+": "+phGetPriceFormat(i.filterPriceFrom)+" - "+phGetPriceFormat(i.filterPriceTo)),jQuery("#phPriceFromTopricefrom").on("change",function(e){let r=jQuery("#phPriceFromTopricefrom").val(),t=jQuery("#phPriceFromTopriceto").val();""==t&&(t=i.filterPriceMax),""==r&&(r=i.filterPriceMin),Number(t)<Number(r)&&(t=r,jQuery("#phPriceFromTopriceto").val(t)),"function"==typeof jQuery("#phPriceFilterRange").slider&&jQuery("#phPriceFilterRange").slider({values:[r,t]}),jQuery("#phPriceFilterPrice").html(l.COM_PHOCACART_PRICE+": "+phGetPriceFormat(r)+" - "+phGetPriceFormat(t))}),jQuery("#phPriceFromTopriceto").on("change",function(e){let r=jQuery("#phPriceFromTopricefrom").val(),t=jQuery("#phPriceFromTopriceto").val();""==t&&(t=i.filterPriceMax),""==r&&(r=i.filterPriceMin),Number(t)<Number(r)&&(t=r,jQuery("#phPriceFromTopriceto").val(t)),"function"==typeof jQuery("#phPriceFilterRange").slider&&jQuery("#phPriceFilterRange").slider({values:[r,t]}),jQuery("#phPriceFilterPrice").html(l.COM_PHOCACART_PRICE+": "+phGetPriceFormat(r)+" - "+phGetPriceFormat(t))})}function phClearField(e){jQuery(e).val(""),"#phPriceFromTopricefrom"!=e&&"#phPriceFromTopriceto"!=e||phPriceFilterRange()}function phHandleSearchEvent(e){var r=Joomla.getOptions("phParamsPC");document.dispatchEvent(new CustomEvent("PhocaCart.search",{detail:{items:[{search_string:e}],params:[{ajaxSearchingFilteringItems:r.ajaxSearchingFilteringItems}]}}))}jQuery(document).ready(function(){jQuery(".collapse").on("shown.bs.collapse",function(){jQuery(this).parent().find(".glyphicon-triangle-right").removeClass("glyphicon-triangle-right").addClass("glyphicon-triangle-bottom"),jQuery(this).parent().find(".fa-caret-right").removeClass("fa-caret-right").addClass("fa-caret-down");var r=jQuery(this).parent().find("svg use").first();if(0<r.length){let e=r.attr("xlink:href");e=e.replace("#pc-si-triangle-right","#pc-si-triangle-bottom"),r.attr("xlink:href",e)}}).on("hidden.bs.collapse",function(){jQuery(this).parent().find(".glyphicon-triangle-bottom").removeClass("glyphicon-triangle-bottom").addClass("glyphicon-triangle-right"),jQuery(this).parent().find(".fa-caret-down").removeClass("fa-caret-down").addClass("fa-caret-right");var r=jQuery(this).parent().find("svg use").first();if(0<r.length){let e=r.attr("xlink:href");e=e.replace("#pc-si-triangle-bottom","#pc-si-triangle-right"),r.attr("xlink:href",e)}}),phPriceFilterRange()});